<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samling | Dashboard</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FontAwesome -->
    <script src="https://kit.fontawesome.com/59135e8829.js" crossorigin="anonymous"></script>

    <!-- DM Sans -->
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- External CSS -->
    <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="css/dasbor.css">
        <link rel="stylesheet" href="css/themes.css">
        <link rel="stylesheet" href="css/notifikasi.css">
    
        <link href="https://cdn.jsdelivr.net/npm/flowbite@4.0.1/dist/flowbite.min.css" rel="stylesheet" />
        <script src="javascript/theme-loader.js"></script>
    </head>
    <body class="min-h-screen flex flex-col bg-gray-50 text-gray-900">
    
        <!-- HEADER -->
    <header class="flex items-center justify-between px-4 md:px-8 pb-6 pt-10">
        <div class="flex items-center gap-4">
    
            <!-- FOTO PROFIL BARU -->
            <img id="profileAvatar" src="img/Komplek 1.png" 
                 alt="Foto Profil"
                 class="profile-picture w-14 h-14 rounded-full object-cover shadow-md border border-gray-200">
    
            <!-- TEKS SAMBUTAN -->
            <div>
                <h1 id="displayProfileName" class="text-2xl md:text-3xl font-extrabold leading-tight text-gray-900 ">
                    Halo, Gregorius
                </h1>
                <p class="text-sm text-gray-600">Samling Dashboard</p>
            </div>
        </div>
    
        <!-- NOTIFICATION ICON & POPUP -->
        <div class="relative">
            <button id="notification-button" data-dropdown-toggle="notification-popup" class="relative text-gray-600 hover:text-green-600 focus:outline-none">
                <i class="fa-solid fa-bell text-2xl"></i>
                <!-- Notification dot -->
                <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"></span>
            </button>
    
            <!-- Notification Popup -->
            <div id="notification-popup" class="hidden absolute right-0 mt-2 w-80 max-w-sm bg-white rounded-lg shadow-xl overflow-hidden z-50">
                <div class="py-2 px-4 border-b border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-800">Notifikasi</h3>
                </div>
                <div id="notification-list-container" class="divide-y divide-gray-100 max-h-96 overflow-y-auto">
                    <!-- Notifikasi akan dimuat secara dinamis di sini -->
                </div>
                <a href="#" class="block bg-gray-50 text-center text-sm font-medium text-green-600 py-2 hover:bg-gray-100">
                    Lihat Semua Notifikasi
                </a>
            </div>
        </div>
    </header>
    
        <!-- CONTENT WRAPPER -->
        <main class="flex-1 px-4 md:px-8 pb-24">
    
            <!-- STAT CARDS -->
            <section class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 ">
    
                <!-- Card 1 -->
                <button onclick="window.location.href='mitra.html'" class="glass-card bg-white  rounded-2xl p-4 flex items-center gap-4 w-full text-left">
                    <div class="w-12 h-12 rounded-xl flex items-center justify-center bg-white/10">
                        <i class="fa-solid fa-building text-emerald-400 text-lg"></i>
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Daftar Mitra</p>
                                <p id="jumlahMitraCount" class="text-2xl font-bold text-gray-900 ">5</p>
                            </div>
                            <!-- <p class="text-sm text-emerald-400 font-semibold">58% avg</p> -->
                        </div>
                    </div>
                </button>
    
                <!-- Card 2 -->
                <button onclick="window.location.href='tps.html'" class="glass-card bg-white  rounded-2xl p-4 flex items-center gap-4">
                    <div class="w-12 h-12 rounded-xl flex items-center justify-center bg-white/10">
                        <i class="fa-solid fa-chart-line text-cyan-300 text-lg"></i>
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Daftar TPS</p>
                                <p id="jumlahTPSCount" class=" text-start text-2xl font-bold text-gray-900 ">6</p>
                            </div>
                            <!-- <p class="text-sm text-emerald-400 font-semibold">58% avg</p> -->
                        </div>
                    </div>
                </button>
    
            </section>
    
            <!-- MAP SECTION -->
            <section class="relative rounded-2xl overflow-hidden shadow-xs glass-card bg-white
      h-[60vh] min-h-[420px]
      md:h-[70vh] md:min-h-[500px]
      lg:h-[80vh] lg:min-h-[600px]
      xl:h-[100vh] xl:min-h-[700px]">
                <div class="map-grid absolute inset-0">
                    <img src="img/Live Map-2.png" id="map-image" alt="">
                </div>
    
    
                <!-- LABEL -->
                 
                <!-- LABEL -->
                 <main class="status-tong-sampah absolute flex flex-col items-start justify-center bg-white  p-4 rounded-lg shadow z-20 top-24 right-6">
                    <p class="font-medium">Status Sampah Rumah</p>
                    <main class="flex flex-row justify-start items-center gap-2">
                        <span class="block bg-[#24C529] w-2 h-2 rounded-full"></span>
                        <p>0-40%</p>
                    </main>
                    <main class="flex flex-row justify-start items-center gap-2">
                        <span class="block bg-[#FFA600] w-2 h-2 rounded-full"></span>
                        <p>40-70%</p>
                    </main>
                    <main class="flex flex-row justify-start items-center gap-2">
                        <span class="block bg-[#FF0000] w-2 h-2 rounded-full"></span>
                        <p>70-100%</p>
                    </main>
                 </main>
                <main class="top-bar-map absolute top-4 left-4 right-4 flex flex-row justify-between z-20 bg-gray-50 p-2 rounded-2xl">
                    <div class="flex flex-row justify-center items-center gap-2 text-black  px-3 py-1 rounded-full text-xs glass-border">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M17.657 5.304c-3.124-3.073-8.189-3.073-11.313 0a7.78 7.78 0 0 0 0 11.13L12 21.999l5.657-5.565a7.78 7.78 0 0 0 0-11.13M12 13.499c-.668 0-1.295-.26-1.768-.732a2.503 2.503 0 0 1 0-3.536c.472-.472 1.1-.732 1.768-.732s1.296.26 1.768.732a2.503 2.503 0 0 1 0 3.536c-.472.472-1.1.732-1.768.732" />
                    </svg>
                    <h5 class="font-medium text-[14px]">Live Map</h5>
                    </div>
                    
    <form class="w-[60%]">
        <div class="flex shadow-xs rounded-base -space-x-0.5 gap-2">
    
                <input type="search" id="search-dropdown" id="input-group-1" class="bg-white  border-none px-3 py-2.5 bg-neutral-secondary-medium border border-default-medium text-heading text-sm focus:ring-brand focus:border-brand block w-full placeholder:text-body rounded-md" placeholder="Cari Lokasi" required>
    
                <button type="button" class="text-white bg-green-600 hover:bg-brand-strong box-border border border-transparent focus:ring-4 focus:ring-brand-medium shadow-xs font-medium leading-5 rounded-e-base text-sm px-4 py-2.5 focus:outline-none rounded-md">
    
                <svg class="w-4 h-4 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/></svg>
                </button>
            </div>
        </form>
                </main>
    
                <!-- NORMAL PIN -->
                <div class="pin" style="left:20%; top:35%;"></div>
                <!-- NORMAL PIN -->
                <div class="pin" style="left:70%; top:24%;"></div>
    
    
                
            </section>
            <button onclick="window.location.href='cari-truk.html'" class="truk-terdekat flex flex-row justify-between items-center w-full p-6 mx-auto my-6 bg-white  rounded-xl">
                    <main class="flex flex-row justify-start items-center gap-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0s.41-1.08 0-1.49zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14" />
                        </svg>
                        <p class="text-gray-900 ">Cari Sampah Truk untuk Ke TPA </p>
                    </main>
                <svg xmlns="http://www.w3.org/2000/svg" class="-rotate-90" width="24" height="24" viewBox="0 0 24 24">
                    <g fill="none" fill-rule="evenodd">
                        <path d="M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z" />
                        <path fill="currentColor" d="M12.707 15.707a1 1 0 0 1-1.414 0L5.636 10.05A1 1 0 1 1 7.05 8.636l4.95 4.95l4.95-4.95a1 1 0 0 1 1.414 1.414z" />
                    </g>
                </svg>
                </button>
        </main>
    
        <main class="navbar-bottom fixed bottom-0 left-0 w-full bg-white  
                border-t shadow 
                flex justify-around items-center py-2 
                px-4 sm:px-10 md:px-20 lg:px-40 xl:px-60">
    
        <a href="beranda.html" class="flex flex-col items-center gap-1 text-green-600">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 sm:w-7 sm:h-7" viewBox="0 0 24 24">
                <path fill="currentColor" d="M21.75 4.69v3.88a2.4 2.4 0 0 1-.71 1.72a2.47 2.47 0 0 1-1.72.71H4.68a2.42 2.42 0 0 1-2.43-2.43V4.69a2.44 2.44 0 0 1 2.43-2.44h14.64a2.44 2.44 0 0 1 1.72.72a2.4 2.4 0 0 1 .71 1.72M11 15.43v3.89a2.42 2.42 0 0 1-2.43 2.43H4.68a2.42 2.42 0 0 1-2.43-2.43v-3.88A2.44 2.44 0 0 1 4.68 13h3.89a2.42 2.42 0 0 1 1.71.72a2.46 2.46 0 0 1 .72 1.71m10.75.01v3.88a2.4 2.4 0 0 1-.71 1.72a2.47 2.47 0 0 1-1.72.71h-3.89a2.45 2.45 0 0 1-1.72-.71a2.4 2.4 0 0 1-.71-1.72v-3.88A2.46 2.46 0 0 1 15.43 13h3.89a2.44 2.44 0 0 1 1.72.72a2.4 2.4 0 0 1 .71 1.72"/>
            </svg>
            <span class="text-sm">Beranda</span>
        </a>
    
        <a href="aktivitas.html" class="flex flex-col items-center gap-1 text-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 sm:w-8 sm:h-8" viewBox="0 0 24 24">
                <path fill="#d1d5dc" d="M6.962 2.421c1.276-.171 2.908-.171 4.981-.171h.114c2.073 0 3.705 0 4.98.171c1.31.176 2.354.545 3.175 1.367c.822.821 1.19 1.866 1.367 3.174c.171 1.276.171 2.908.171 4.981v.114c0 2.073 0 3.705-.171 4.98c-.176 1.31-.545 2.354-1.367 3.175c-.821.822-1.866 1.19-3.174 1.367c-1.276.171-2.908.171-4.981.171h-.114c-2.073 0-3.705 0-4.98-.171c-1.31-.176-2.354-.545-3.175-1.367c-.822-.821-1.19-1.866-1.367-3.174c-.171-1.276-.171-2.908-.171-4.981v-.114c0-2.073 0-3.705.171-4.98c.176-1.31.545-2.354 1.367-3.175c.821-.822 1.866-1.19 3.174-1.367m4.773 4.432a.75.75 0 0 0-1.431-.132L8.492 11.25H7a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 .696-.472l1.063-2.657l1.506 7.526a.75.75 0 0 0 1.431.132l1.812-4.529H17a.75.75 0 0 0 0-1.5h-2a.75.75 0 0 0-.696.471L13.24 14.38z"/>
            </svg>
            <span class="text-sm">Aktivitas</span>
        </a>
    
        <a href="mitra.html" class="flex flex-col items-center gap-1 text-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 sm:w-9 sm:h-9" viewBox="0 0 24 24">
                <path fill="#d1d5dc" d="M19.291 6h.71a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-2l-4.17-5.836a2 2 0 0 0-2.201-.753l-2.486.746a2 2 0 0 1-1.988-.502l-.293-.293a1 1 0 0 1 .152-1.539l5.401-3.6a2 2 0 0 1 2.183-.024l4.156 2.645A1 1 0 0 0 19.29 6M5.027 14.295l-1.616 1.414a1 1 0 0 0 .041 1.538l5.14 4.04a1 1 0 0 0 1.487-.29l.704-1.232a2 2 0 0 0-.257-2.338l-2.702-2.972a2 2 0 0 0-2.797-.16M7.046 5H3a1 1 0 0 0-1 1v7.516a2 2 0 0 0 .35 1.13l.074-.066l1.615-1.414a3.5 3.5 0 0 1 4.895.28l2.702 2.972a3.5 3.5 0 0 1 .45 4.09l-.655 1.146a2 2 0 0 0 1.738-.155l4.41-2.646a1 1 0 0 0 .299-1.438l-5.267-7.379a.5.5 0 0 0-.55-.188l-2.486.745a3.5 3.5 0 0 1-3.48-.877l-.293-.293a2.5 2.5 0 0 1 .38-3.848z"/>
            </svg>
            <span class="text-sm">Mitra</span>
        </a>
    
        <a href="akun.html" class="flex flex-col items-center gap-2 text-gray-300">
            <i class="fa-solid fa-user text-[24px] sm:text-[26px]"></i>
            <span class="text-sm">Akun</span>
        </a>
    </main>
    
    
    <script src="https://unpkg.com/@panzoom/panzoom/dist/panzoom.min.js"></script>
    <script>
      const elem = document.querySelector('#map-image');
      const panzoom = Panzoom(elem);
      elem.parentElement.addEventListener('wheel', panzoom.zoomWithWheel);
    </script>
        <script src="https://kit.fontawesome.com/59135e8829.js" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/flowbite@4.0.1/dist/flowbite.min.js"></script>
        <script src="javascript/partner_data.js"></script>
        <script src="javascript/global.js"></script>
        <script src="javascript/notifikasi.js"></script>
    
    </body>
    </html>
    