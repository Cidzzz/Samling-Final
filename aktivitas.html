<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samling | Aktivitas Truk</title>

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/59135e8829.js" crossorigin="anonymous"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/aktivitas.css">
    <script src="javascript/theme-loader.js"></script>
    <style>
        body {
            font-family: 'DM Sans', sans-serif;
            background: #fbfbfb;
        }
    </style>
</head>
<body class="bg-gray-50">

    <div class="container-page pb-24 px-4 md:px-8 pt-10"> 
        <!-- Header -->
        <header class="flex items-center justify-between mb-6">
            <div class="text-center">
                <h1 class="text-2xl font-bold text-gray-900 ">Aktivitas & Riwayat</h1>
                <p class="text-sm text-gray-400">Status Keberangkatan Truk Sampah</p>
            </div>
            <div class="w-10 h-10"></div> <!-- Placeholder for alignment -->
        </header>

        <!-- Navigation Tabs -->
        <div class="mb-6 flex justify-center">
            <div class="bg-gray-200 rounded-lg p-1 flex items-center">
                <button id="nav-truck" class="nav-button px-6 py-2 text-sm font-bold text-white bg-green-600 rounded-md shadow">Truk</button>
                <button id="nav-partner" class="nav-button px-6 py-2 text-sm font-bold text-gray-600">Mitra</button>
            </div>
        </div>

        <!-- Main Content -->
        <main class="space-y-8" id="activity-container">
            <!-- Data akan dirender oleh JavaScript -->
        </main>

        <main class="space-y-8 hidden" id="partner-activity-container">
            <header class="flex items-center justify-between">
            
                <div class="text-left">
                    <h1 class="text-2xl font-bold text-gray-900">Riwayat Transaksi</h1>
                    <p class="text-sm text-gray-400">Daftar transaksi dengan mitra daur ulang</p>
                </div>
    
                <div class="flex items-center gap-2">
                    <button onclick="exportHistoryToCSV()" class="w-10 h-10 rounded-full bg-white shadow-sm text-green-400 border border-gray-100 hover:bg-green-100 transition flex items-center justify-center" title="Export ke Excel">
                        <i class="fa-solid fa-file-arrow-down"></i>
                    </button>
                    <a href="mitra.html" class="w-10 h-10 rounded-full bg-white shadow-sm text-gray-600 border border-gray-100 hover:bg-gray-100 transition flex items-center justify-center" title="Kembali ke Mitra">
                        <i class="fa-solid fa-arrow-left"></i>
                    </a>
                </div>
            </header>
            <!-- Controls -->
            <div class="space-y-4 mb-6">
                <div class="bg-white shadow-sm p-2 rounded-xl flex flex-wrap items-center gap-2">
                    <p class="text-sm font-medium text-gray-600 px-2">Waktu:</p>
                    <nav class="inline-flex">
                        <button id="filter-3days" onclick="applyFilters('3days')" 
                            class="px-3 py-2 rounded-lg text-sm font-medium transition-all bg-green-600 text-white shadow-sm">
                            3 Hari
                        </button>
                        <button id="filter-week" onclick="applyFilters('week')" 
                            class="px-3 py-2 rounded-lg text-sm font-medium text-gray-400 hover:text-gray-900 transition-all">
                            Minggu
                        </button>
                        <button id="filter-month" onclick="applyFilters('month')" 
                            class="px-3 py-2 rounded-lg text-sm font-medium text-gray-400 hover:text-gray-900 transition-all">
                            Bulan
                        </button>
                        <button id="filter-all" onclick="applyFilters('all')" 
                            class="px-3 py-2 rounded-lg text-sm font-medium text-gray-400 hover:text-gray-900 transition-all">
                            Semua
                        </button>
                    </nav>
                </div>
                <div class="bg-white shadow-sm p-3 rounded-xl grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="md:col-span-1">
                        <div class="search-container flex items-center gap-2 px-3 py-2 rounded-xl border border-gray-200 h-full">
                            <i class="fa-solid fa-magnifying-glass text-gray-400 text-sm"></i>
                            <input type="text" id="searchInput" onkeyup="applyFilters()" 
                                   placeholder="Cari jenis sampah..." 
                                   class="bg-transparent border-none outline-none text-sm text-gray-900 w-full placeholder-gray-400">
                        </div>
                    </div>
                    <div class="md:col-span-2 grid grid-cols-2 sm:grid-cols-4 gap-2 items-center">
                        <select id="categoryFilter" onchange="applyFilters()" 
                                class="bg-gray-50 text-gray-900 text-sm border border-gray-200 rounded-xl px-3 py-2 outline-none focus:border-green-500 cursor-pointer h-full">
                            <option value="all">Semua Kategori</option>
                            <option value="organik">Organik</option>
                            <option value="non-organik">Non-Organik</option>
                        </select>
                        <input type="number" id="minKg" onkeyup="applyFilters()" placeholder="Min kg" class="bg-gray-50 text-gray-900 text-sm border border-gray-200 rounded-xl px-3 py-2 outline-none focus:border-green-500 h-full placeholder-gray-400">
                        <input type="number" id="maxKg" onkeyup="applyFilters()" placeholder="Max kg" class="bg-gray-50 text-gray-900 text-sm border border-gray-200 rounded-xl px-3 py-2 outline-none focus:border-green-500 h-full placeholder-gray-400">
                        <button onclick="resetFilters()" class="bg-red-500 text-white rounded-xl px-3 py-2 text-sm font-medium hover:bg-red-600 transition h-full">
                            Reset
                        </button>
                    </div>
                </div>
            </div>
    
            <!-- Main List -->
            <main id="transactionsContainer" class="flex flex-col gap-4">
                <!-- Transaksi akan dimuat di sini oleh JavaScript -->
            </main>
        </main>
    </div>

    <!-- Bottom Navbar -->
    <main class="navbar-bottom fixed bottom-0 left-0 w-full bg-white 
            border-t shadow 
            flex justify-around items-center py-2 
            px-4 sm:px-10 md:px-20 lg:px-40 xl:px-60">

    <a href="beranda.html" class="flex flex-col items-center gap-1 text-gray-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 sm:w-7 sm:h-7" viewBox="0 0 24 24">
            <path fill="currentColor" d="M21.75 4.69v3.88a2.4 2.4 0 0 1-.71 1.72a2.47 2.47 0 0 1-1.72.71H4.68a2.42 2.42 0 0 1-2.43-2.43V4.69a2.44 2.44 0 0 1 2.43-2.44h14.64a2.44 2.44 0 0 1 1.72.72a2.4 2.4 0 0 1 .71 1.72M11 15.43v3.89a2.42 2.42 0 0 1-2.43 2.43H4.68a2.42 2.42 0 0 1-2.43-2.43v-3.88A2.44 2.44 0 0 1 4.68 13h3.89a2.42 2.42 0 0 1 1.71.72a2.46 2.46 0 0 1 .72 1.71m10.75.01v3.88a2.4 2.4 0 0 1-.71 1.72a2.47 2.47 0 0 1-1.72.71h-3.89a2.45 2.45 0 0 1-1.72-.71a2.4 2.4 0 0 1-.71-1.72v-3.88A2.46 2.46 0 0 1 15.43 13h3.89a2.44 2.44 0 0 1 1.72.72a2.4 2.4 0 0 1 .71 1.72"/>
        </svg>
        <span class="text-sm">Beranda</span>
    </a>

    <a href="aktivitas.html" class="flex flex-col items-center gap-1 text-green-600">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 sm:w-8 sm:h-8" viewBox="0 0 24 24">
            <path fill="currentColor" d="M6.962 2.421c1.276-.171 2.908-.171 4.981-.171h.114c2.073 0 3.705 0 4.98.171c1.31.176 2.354.545 3.175 1.367c.822.821 1.19 1.866 1.367 3.174c.171 1.276.171 2.908.171 4.981v.114c0 2.073 0 3.705-.171 4.98c-.176 1.31-.545 2.354-1.367 3.175c-.821.822-1.866 1.19-3.174 1.367c-1.276.171-2.908.171-4.981.171h-.114c-2.073 0-3.705 0-4.98-.171c-1.31-.176-2.354-.545-3.175-1.367c-.822-.821-1.19-1.866-1.367-3.174c-.171-1.276-.171-2.908-.171-4.981v-.114c0-2.073 0-3.705.171-4.98c.176-1.31.545-2.354 1.367-3.175c.821-.822 1.866-1.19 3.174-1.367m4.773 4.432a.75.75 0 0 0-1.431-.132L8.492 11.25H7a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 .696-.472l1.063-2.657l1.506 7.526a.75.75 0 0 0 1.431.132l1.812-4.529H17a.75.75 0 0 0 0-1.5h-2a.75.75 0 0 0-.696.471L13.24 14.38z"/>
        </svg>
        <span class="text-sm">Aktivitas</span>
    </a>

    <a href="mitra.html" class="flex flex-col items-center gap-1 text-gray-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 sm:w-9 sm:h-9" viewBox="0 0 24 24">
            <path fill="#d1d5dc" d="M19.291 6h.71a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-2l-4.17-5.836a2 2 0 0 0-2.201-.753l-2.486.746a2 2 0 0 1-1.988-.502l-.293-.293a1 1 0 0 1 .152-1.539l5.401-3.6a2 2 0 0 1 2.183-.024l4.156 2.645A1 1 0 0 0 19.29 6M5.027 14.295l-1.616 1.414a1 1 0 0 0 .041 1.538l5.14 4.04a1 1 0 0 0 1.487-.29l.704-1.232a2 2 0 0 0-.257-2.338l-2.702-2.972a2 2 0 0 0-2.797-.16M7.046 5H3a1 1 0 0 0-1 1v7.516a2 2 0 0 0 .35 1.13l.074-.066l1.615-1.414a3.5 3.5 0 0 1 4.895.28l2.702 2.972a3.5 3.5 0 0 1 .45 4.09l-.655 1.146a2 2 0 0 0 1.738-.155l4.41-2.646a1 1 0 0 0 .299-1.438l-5.267-7.379a.5.5 0 0 0-.55-.188l-2.486.745a3.5 3.5 0 0 1-3.48-.877l-.293-.293a2.5 2.5 0 0 1 .38-3.848z"/>
        </svg>
        <span class="text-sm">Mitra</span>
    </a>

    <a href="akun.html" class="flex flex-col items-center gap-2 text-gray-300">
        <i class="fa-solid fa-user text-[24px] sm:text-[26px]"></i>
        <span class="text-sm">Akun</span>
    </a>
</main>

<script src="javascript/riwayat-mitra-data.js"></script>
<script src="javascript/truck_data.js"></script>
<script src="javascript/aktivitas.js"></script>
<script src="javascript/global.js"></script>
<script src="javascript/theme.js"></script>
<script src="javascript/riwayat-mitra.js"></script>

</body>
</html>